<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scene 13: Then I can / Then I can be your only SATISFACTION</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            position: relative;
            height: 100vh;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .satisfaction-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .content {
            position: relative;
            z-index: 2;
            text-align: center;
            width: 80%;
            max-width: 800px;
        }

        .title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 1s ease-out forwards;
            animation-delay: 0.5s;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
        }

        .progress-ring-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 2rem;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-circle {
            transition: stroke-dashoffset 0.058s ease; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
            stroke: #fff;
            stroke-width: 4;
            fill: transparent;
        }

        .progress-ring-bg {
            stroke: rgba(255, 255, 255, 0.1);
            stroke-width: 4;
            fill: transparent;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: bold;
        }

        .satisfaction-level {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            border: 1px solid #333;
            z-index: 3;
        }

        .level-item {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            min-width: 200px;
        }

        .level-value {
            color: #0f0;
            font-weight: bold;
        }

        .satisfaction-visual {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 200px;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #333;
            z-index: 3;
        }

        .satisfaction-meter {
            width: 100%;
            height: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .satisfaction-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #333, #fff);
            transition: width 0.05s ease; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
        }

        .satisfaction-label {
            font-size: 0.8rem;
            margin-bottom: 5px;
            text-align: center;
        }

        .satisfaction-emotions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .emotion {
            font-size: 1.2rem;
            opacity: 0.3;
            transition: opacity 0.05s ease; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
        }

        .emotion.active {
            opacity: 1;
        }

        .feedback-loop {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 100px;
            z-index: 3;
        }

        .heartbeat-canvas {
            width: 100%;
            height: 100%;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-container {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            height: 4px;
            background-color: rgba(255, 255, 255, 0.1);
            z-index: 3;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: #fff;
            transition: width 0.05s ease; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas class="satisfaction-canvas" id="satisfactionCanvas"></canvas>
        
        <div class="content">
            <h1 class="title">Then I can / Then I can be your only SATISFACTION</h1>
            
            <div class="progress-ring-container">
                <svg class="progress-ring" width="200" height="200">
                    <circle class="progress-ring-bg" cx="100" cy="100" r="90"></circle>
                    <circle class="progress-ring-circle" id="progressCircle" cx="100" cy="100" r="90"></circle>
                </svg>
                <div class="progress-text" id="progressText">0%</div>
            </div>
        </div>
        
        <div class="satisfaction-level">
            <div class="level-item">
                <span>Satisfaction:</span>
                <span class="level-value" id="satisfactionValue">0%</span>
            </div>
            <div class="level-item">
                <span>Completion:</span>
                <span class="level-value" id="completionValue">0%</span>
            </div>
            <div class="level-item">
                <span>Feedback:</span>
                <span class="level-value" id="feedbackValue">0</span>
            </div>
        </div>
        
        <div class="satisfaction-visual">
            <div class="satisfaction-label">SATISFACTION LEVEL</div>
            <div class="satisfaction-meter">
                <div class="satisfaction-fill" id="satisfactionFill"></div>
            </div>
            <div class="satisfaction-emotions">
                <span class="emotion" id="emotion1">ğŸ˜</span>
                <span class="emotion" id="emotion2">ğŸ™‚</span>
                <span class="emotion" id="emotion3">ğŸ˜Š</span>
                <span class="emotion" id="emotion4">ğŸ˜„</span>
                <span class="emotion" id="emotion5">ğŸ¤©</span>
            </div>
        </div>
        
        <div class="feedback-loop">
            <canvas class="heartbeat-canvas" id="heartbeatCanvas"></canvas>
        </div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const satisfactionCanvas = document.getElementById('satisfactionCanvas');
            const satisfactionCtx = satisfactionCanvas.getContext('2d');
            
            const heartbeatCanvas = document.getElementById('heartbeatCanvas');
            const heartbeatCtx = heartbeatCanvas.getContext('2d');
            
            // è®¾ç½®ç”»å¸ƒå¤§å°
            function resizeCanvas() {
                satisfactionCanvas.width = window.innerWidth;
                satisfactionCanvas.height = window.innerHeight;
                
                heartbeatCanvas.width = 300;
                heartbeatCanvas.height = 100;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // è¿›åº¦ç¯å‚æ•°
            const progressCircle = document.getElementById('progressCircle');
            const progressText = document.getElementById('progressText');
            const radius = progressCircle.r.baseVal.value;
            const circumference = radius * 2 * Math.PI;
            
            progressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            progressCircle.style.strokeDashoffset = circumference;
            
            function setProgress(percent) {
                const offset = circumference - (percent / 100) * circumference;
                progressCircle.style.strokeDashoffset = offset;
                progressText.textContent = `${Math.floor(percent)}%`;
                
                // æ›´æ–°æ»¡è¶³åº¦æŒ‡æ ‡
                document.getElementById('satisfactionValue').textContent = `${Math.floor(percent)}%`;
                document.getElementById('completionValue').textContent = `${Math.floor(percent * 0.8)}%`;
                document.getElementById('feedbackValue').textContent = Math.floor(percent / 10);
                
                // æ›´æ–°æ»¡è¶³åº¦å¯è§†åŒ–
                document.getElementById('satisfactionFill').style.width = percent + '%';
                
                // æ ¹æ®æ»¡è¶³åº¦æ›´æ–°è¡¨æƒ…
                updateEmotions(percent);
            }
            
            function updateEmotions(percent) {
                // é‡ç½®æ‰€æœ‰è¡¨æƒ…
                for (let i = 1; i <= 5; i++) {
                    document.getElementById(`emotion${i}`).classList.remove('active');
                }
                
                // æ ¹æ®ç™¾åˆ†æ¯”æ¿€æ´»å¯¹åº”çš„è¡¨æƒ…
                if (percent > 0) document.getElementById('emotion1').classList.add('active');
                if (percent > 20) document.getElementById('emotion2').classList.add('active');
                if (percent > 40) document.getElementById('emotion3').classList.add('active');
                if (percent > 60) document.getElementById('emotion4').classList.add('active');
                if (percent > 80) document.getElementById('emotion5').classList.add('active');
            }
            
            // åé¦ˆå›è·¯ç²’å­ç³»ç»Ÿ
            const particles = [];
            const maxParticles = 100;
            
            class Particle {
                constructor() {
                    this.reset();
                }
                
                reset() {
                    this.x = Math.random() * satisfactionCanvas.width;
                    this.y = Math.random() * satisfactionCanvas.height;
                    this.size = Math.random() * 3 + 1;
                    this.speedX = (Math.random() - 0.5) * 12; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                    this.speedY = (Math.random() - 0.5) * 12; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                    this.opacity = Math.random() * 0.5 + 0.5;
                    this.color = `rgba(255, 255, 255, ${this.opacity})`;
                }
                
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    
                    // è¾¹ç•Œæ£€æµ‹
                    if (this.x < 0 || this.x > satisfactionCanvas.width) {
                        this.speedX *= -1;
                    }
                    if (this.y < 0 || this.y > satisfactionCanvas.height) {
                        this.speedY *= -1;
                    }
                    
                    // å‘ä¸­å¿ƒç§»åŠ¨ - å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                    const centerX = satisfactionCanvas.width / 2;
                    const centerY = satisfactionCanvas.height / 2;
                    const dx = centerX - this.x;
                    const dy = centerY - this.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 200) {
                        this.speedX += dx * 0.0006; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                        this.speedY += dy * 0.0006; // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                    }
                }
                
                draw() {
                    satisfactionCtx.fillStyle = this.color;
                    satisfactionCtx.beginPath();
                    satisfactionCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    satisfactionCtx.fill();
                }
            }
            
            // åˆå§‹åŒ–ç²’å­
            for (let i = 0; i < maxParticles; i++) {
                particles.push(new Particle());
            }
            
            // ç»˜åˆ¶è¿æ¥çº¿
            function drawConnections() {
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            satisfactionCtx.strokeStyle = `rgba(255, 255, 255, ${0.2 * (1 - distance / 100)})`;
                            satisfactionCtx.lineWidth = 0.5;
                            satisfactionCtx.beginPath();
                            satisfactionCtx.moveTo(particles[i].x, particles[i].y);
                            satisfactionCtx.lineTo(particles[j].x, particles[j].y);
                            satisfactionCtx.stroke();
                        }
                    }
                }
            }
            
            // å¿ƒè·³æ³¢å½¢
            let heartbeatData = [];
            let heartbeatIndex = 0;
            
            function initHeartbeatData() {
                for (let i = 0; i < 300; i++) {
                    heartbeatData.push(0);
                }
            }
            
            function updateHeartbeat() {
                // ç”Ÿæˆå¿ƒè·³æ³¢å½¢ - å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                const time = Date.now() / 1000;
                const value = Math.sin(time * 30) * Math.exp(-Math.pow((time % 0.1667) - 0.0167, 2) * 300); // å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                
                heartbeatData[heartbeatIndex] = value * 50 + 50; // ç¼©æ”¾åˆ°0-100èŒƒå›´
                heartbeatIndex = (heartbeatIndex + 1) % heartbeatData.length;
            }
            
            function drawHeartbeat() {
                heartbeatCtx.clearRect(0, 0, heartbeatCanvas.width, heartbeatCanvas.height);
                heartbeatCtx.strokeStyle = 'rgba(255, 255, 255, 0.8)';
                heartbeatCtx.lineWidth = 2;
                heartbeatCtx.beginPath();
                
                for (let i = 0; i < heartbeatData.length; i++) {
                    const x = (i / heartbeatData.length) * heartbeatCanvas.width;
                    const y = heartbeatCanvas.height - (heartbeatData[i] / 100) * heartbeatCanvas.height;
                    
                    if (i === 0) {
                        heartbeatCtx.moveTo(x, y);
                    } else {
                        heartbeatCtx.lineTo(x, y);
                    }
                }
                
                heartbeatCtx.stroke();
            }
            
            // åŠ¨ç”»å¾ªç¯
            let progress = 0;
            let satisfactionWords = [
                "æ¸´æœ›", "æœŸå¾…", "æ»¡è¶³", "æ„‰æ‚¦", "ç‹‚å–œ"
            ];
            
            function animate() {
                // æ¸…é™¤ç”»å¸ƒ
                satisfactionCtx.clearRect(0, 0, satisfactionCanvas.width, satisfactionCanvas.height);
                
                // æ›´æ–°å’Œç»˜åˆ¶ç²’å­
                for (const particle of particles) {
                    particle.update();
                    particle.draw();
                }
                
                // ç»˜åˆ¶è¿æ¥çº¿
                drawConnections();
                
                // æ›´æ–°è¿›åº¦ - å†åŠ å¿«3å€é€Ÿåº¦ï¼ˆæ€»å…±6å€ï¼‰
                progress += 100 / 500; // 0.5ç§’å®Œæˆï¼ˆåŸæ¥3ç§’ï¼‰
                if (progress >= 100) {
                    progress = 100;
                }
                setProgress(progress);
                
                // ç»˜åˆ¶æ»¡è¶³åº¦æ–‡å­—
                drawSatisfactionWords(progress);
                
                // æ›´æ–°å¿ƒè·³
                updateHeartbeat();
                drawHeartbeat();
                
                // æ›´æ–°è¿›åº¦æ¡
                document.getElementById('progressBar').style.width = progress + '%';
                
                requestAnimationFrame(animate);
            }
            
            function drawSatisfactionWords(progress) {
                const wordIndex = Math.floor(progress / 20); // æ¯20%æ¢ä¸€ä¸ªè¯
                if (wordIndex >= 0 && wordIndex < satisfactionWords.length) {
                    const word = satisfactionWords[wordIndex];
                    const opacity = (progress % 20) / 20; // æ¸å˜æ•ˆæœ
                    
                    satisfactionCtx.save();
                    satisfactionCtx.font = 'bold 24px Courier New';
                    satisfactionCtx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
                    satisfactionCtx.textAlign = 'center';
                    satisfactionCtx.fillText(word, satisfactionCanvas.width / 2, satisfactionCanvas.height / 2 + 150);
                    satisfactionCtx.restore();
                }
            }
            
            // åˆå§‹åŒ–
            initHeartbeatData();
            animate();
        });
    </script>
</body>
</html>