<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>If I'm a tomato / Then I'll give you antioxidants</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .scene-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .tomato-container {
            position: relative;
            width: 300px;
            height: 300px;
            opacity: 0;
            z-index: 2;
        }

        .tomato {
            position: absolute;
            width: 100%;
            height: 100%;
            filter: grayscale(100%);
        }

        .tomato-cracked {
            position: absolute;
            width: 100%;
            height: 100%;
            filter: grayscale(100%);
            clip-path: polygon(
                50% 0%, 61% 35%, 98% 35%, 68% 57%,
                79% 91%, 50% 70%, 21% 91%, 32% 57%,
                2% 35%, 39% 35%
            );
        }

        .code-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            z-index: 1;
        }

        .code-line {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #fff;
            margin: 5px 0;
            opacity: 0;
            white-space: pre;
        }

        .antioxidant {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #fff;
            border-radius: 50%;
            opacity: 0;
            z-index: 3;
            box-shadow: 0 0 10px #fff;
        }

        .radical {
            position: absolute;
            background-color: #333;
            opacity: 0;
            z-index: 1;
            box-shadow: 0 0 5px #333;
        }

        .connection-line {
            position: absolute;
            background: linear-gradient(90deg, #fff, #333);
            height: 2px;
            transform-origin: left center;
            opacity: 0;
            z-index: 2;
        }

        .data-packet {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #ccc;
            opacity: 0;
            z-index: 4;
        }

        .terminal {
            position: absolute;
            bottom: 15%;
            background-color: rgba(20, 20, 20, 0.8);
            border: 1px solid #fff;
            border-radius: 5px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #fff;
            width: 80%;
            max-width: 600px;
            opacity: 0;
            z-index: 5;
        }

        .terminal-line {
            margin: 2px 0;
            opacity: 0;
        }

        .lyrics {
            position: absolute;
            bottom: 5%;
            text-align: center;
            font-size: 1.5rem;
            opacity: 0;
            z-index: 6;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes crack {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(2deg); }
            100% { transform: scale(1.2) rotate(-1deg); opacity: 0; }
        }

        @keyframes release {
            0% { transform: translate(-50%, -50%) scale(0); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes float {
            0% { transform: translate(0, 0); }
            100% { transform: translate(0, -10px); }
        }

        @keyframes dataFlow {
            0% { transform: translate(0, 0); }
            100% { transform: translate(100px, 0); }
        }

        @keyframes neutralize {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.5); }
        }

        @keyframes glitch {
            0%, 100% { text-shadow: 0 0 5px #fff; }
            25% { text-shadow: -2px 0 #666, 2px 0 #999; }
            50% { text-shadow: 2px 0 #666, -2px 0 #999; }
            75% { text-shadow: 0 0 10px #fff; }
        }

        @keyframes terminalBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="scene-container">
        <!-- 代码背景 -->
        <div class="code-container">
            <div class="code-line">class Tomato:</div>
            <div class="code-line">  def __init__(self):</div>
            <div class="code-line">    self.antioxidants = []</div>
            <div class="code-line">    self.nutrients = {"lycopene": 95, "vitamin_c": 21}</div>
            <div class="code-line">  </div>
            <div class="code-line">  def release_antioxidants(self):</div>
            <div class="code-line">    for i in range(40):</div>
            <div class="code-line">      self.antioxidants.append(Antioxidant())</div>
            <div class="code-line">    return self.antioxidants</div>
            <div class="code-line">  </div>
            <div class="code-line">class Antioxidant:</div>
            <div class="code-line">  def __init__(self):</div>
            <div class="code-line">    self.power = random.randint(50, 100)</div>
            <div class="code-line">  </div>
            <div class="code-line">  def neutralize(self, radical):</div>
            <div class="code-line">    return radical.strength - self.power</div>
        </div>

        <!-- 番茄容器 -->
        <div class="tomato-container">
            <!-- 完整番茄 -->
            <svg class="tomato" viewBox="0 0 200 200">
                <ellipse cx="100" cy="120" rx="80" ry="90" fill="#ff6b6b"/>
                <path d="M100,30 Q90,50 100,70 Q110,50 100,30" fill="#4CAF50"/>
                <ellipse cx="100" cy="120" rx="70" ry="80" fill="#ff8787"/>
            </svg>

            <!-- 破裂番茄 -->
            <svg class="tomato-cracked" viewBox="0 0 200 200">
                <ellipse cx="100" cy="120" rx="80" ry="90" fill="#ff6b6b"/>
                <path d="M100,30 Q90,50 100,70 Q110,50 100,30" fill="#4CAF50"/>
                <ellipse cx="100" cy="120" rx="70" ry="80" fill="#ff8787"/>
            </svg>
        </div>

        <!-- 抗氧化分子将通过JavaScript动态创建 -->
        <div id="antioxidants-container"></div>

        <!-- 自由基将通过JavaScript动态创建 -->
        <div id="radicals-container"></div>

        <!-- 连接线将通过JavaScript动态创建 -->
        <div id="connections-container"></div>

        <!-- 数据包将通过JavaScript动态创建 -->
        <div id="data-packets-container"></div>

        <!-- 终端输出 -->
        <div class="terminal">
            <div class="terminal-line">$ ./tomato_simulation --mode=antioxidant_release</div>
            <div class="terminal-line">Initializing tomato object...</div>
            <div class="terminal-line">Scanning for free radicals...</div>
            <div class="terminal-line">Found 25 free radicals in system</div>
            <div class="terminal-line">Releasing antioxidants...</div>
            <div class="terminal-line">[████████████████████] 100% Complete</div>
            <div class="terminal-line">Neutralizing free radicals...</div>
            <div class="terminal-line">Process completed successfully</div>
        </div>

        <!-- 歌词 -->
        <div class="lyrics">
            If I'm a tomato / Then I'll give you antioxidants
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tomatoContainer = document.querySelector('.tomato-container');
            const tomato = document.querySelector('.tomato');
            const tomatoCracked = document.querySelector('.tomato-cracked');
            const codeContainer = document.querySelector('.code-container');
            const codeLines = document.querySelectorAll('.code-line');
            const terminal = document.querySelector('.terminal');
            const terminalLines = document.querySelectorAll('.terminal-line');
            const lyrics = document.querySelector('.lyrics');
            const antioxidantsContainer = document.getElementById('antioxidants-container');
            const radicalsContainer = document.getElementById('radicals-container');
            const connectionsContainer = document.getElementById('connections-container');
            const dataPacketsContainer = document.getElementById('data-packets-container');

            // 创建抗氧化分子
            function createAntioxidants() {
                const count = 40;
                for (let i = 0; i < count; i++) {
                    const antioxidant = document.createElement('div');
                    antioxidant.classList.add('antioxidant');
                    
                    // 随机位置和方向
                    const angle = (i / count) * Math.PI * 2;
                    const distance = 100 + Math.random() * 100;
                    const tx = Math.cos(angle) * distance;
                    const ty = Math.sin(angle) * distance;
                    
                    antioxidant.style.setProperty('--tx', `${tx}px`);
                    antioxidant.style.setProperty('--ty', `${ty}px`);
                    
                    antioxidantsContainer.appendChild(antioxidant);
                }
            }

            // 创建自由基
            function createRadicals() {
                const count = 25;
                for (let i = 0; i < count; i++) {
                    const radical = document.createElement('div');
                    radical.classList.add('radical');
                    
                    // 随机大小和形状
                    const size = 15 + Math.random() * 25;
                    const shape = Math.random() > 0.5 ? '50%' : '0%';
                    
                    radical.style.width = `${size}px`;
                    radical.style.height = `${size}px`;
                    radical.style.borderRadius = shape;
                    
                    // 随机位置
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    
                    radical.style.left = `${x}px`;
                    radical.style.top = `${y}px`;
                    
                    radicalsContainer.appendChild(radical);
                }
            }

            // 创建连接线
            function createConnection(antioxidant, radical) {
                const line = document.createElement('div');
                line.classList.add('connection-line');
                
                const aRect = antioxidant.getBoundingClientRect();
                const rRect = radical.getBoundingClientRect();
                
                const x1 = aRect.left + aRect.width / 2;
                const y1 = aRect.top + aRect.height / 2;
                const x2 = rRect.left + rRect.width / 2;
                const y2 = rRect.top + rRect.height / 2;
                
                const distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
                
                line.style.width = `${distance}px`;
                line.style.left = `${x1}px`;
                line.style.top = `${y1}px`;
                line.style.transform = `rotate(${angle}deg)`;
                
                connectionsContainer.appendChild(line);
                
                return line;
            }

            // 创建数据包
            function createDataPacket(startX, startY, endX, endY) {
                const packet = document.createElement('div');
                packet.classList.add('data-packet');
                
                packet.style.left = `${startX}px`;
                packet.style.top = `${startY}px`;
                
                const dx = endX - startX;
                const dy = endY - startY;
                
                packet.style.setProperty('--dx', `${dx}px`);
                packet.style.setProperty('--dy', `${dy}px`);
                
                dataPacketsContainer.appendChild(packet);
                
                return packet;
            }

            // 动画时间线
            setTimeout(() => {
                codeContainer.style.opacity = '0.3';
                codeLines.forEach((line, index) => {
                    setTimeout(() => {
                        line.style.opacity = '1';
                        line.style.animation = 'fadeIn 0.2s forwards';
                    }, index * 25);
                });
            }, 200);

            setTimeout(() => {
                tomatoContainer.style.opacity = '1';
                tomatoContainer.style.animation = 'fadeIn 0.5s forwards';
                tomato.style.animation = 'pulse 1s infinite 0.5s';
            }, 600);

            setTimeout(() => {
                createAntioxidants();
                createRadicals();
                
                // 显示自由基
                const radicals = document.querySelectorAll('.radical');
                radicals.forEach((radical, index) => {
                    setTimeout(() => {
                        radical.style.opacity = '0.8';
                        radical.style.animation = `float ${1.5 + Math.random()}s infinite alternate ease-in-out`;
                    }, index * 10);
                });
            }, 900);

            setTimeout(() => {
                // 显示终端
                terminal.style.opacity = '1';
                terminal.style.animation = 'fadeIn 0.3s forwards';
                
                terminalLines.forEach((line, index) => {
                    setTimeout(() => {
                        line.style.opacity = '1';
                        line.style.animation = 'fadeIn 0.15s forwards, terminalBlink 0.3s infinite 0.15s';
                    }, index * 50);
                });
            }, 1200);

            setTimeout(() => {
                // 番茄破裂效果
                tomato.style.opacity = '0';
                tomatoCracked.style.opacity = '1';
                tomatoCracked.style.animation = 'crack 0.4s forwards';
                
                // 释放抗氧化分子
                const antioxidants = document.querySelectorAll('.antioxidant');
                antioxidants.forEach((antioxidant, index) => {
                    setTimeout(() => {
                        antioxidant.style.opacity = '1';
                        antioxidant.style.animation = 'release 1s forwards';
                        antioxidant.style.left = '50%';
                        antioxidant.style.top = '50%';
                    }, index * 8);
                });
            }, 1500);

            setTimeout(() => {
                // 创建数据包流动
                const antioxidants = document.querySelectorAll('.antioxidant');
                const radicals = document.querySelectorAll('.radical');
                
                antioxidants.forEach((antioxidant, aIndex) => {
                    if (aIndex % 2 === 0 && aIndex / 2 < radicals.length) {
                        const radical = radicals[aIndex / 2];
                        const aRect = antioxidant.getBoundingClientRect();
                        const rRect = radical.getBoundingClientRect();
                        
                        // 创建多个数据包
                        for (let i = 0; i < 3; i++) {
                            setTimeout(() => {
                                const packet = createDataPacket(
                                    aRect.left + aRect.width / 2,
                                    aRect.top + aRect.height / 2,
                                    rRect.left + rRect.width / 2,
                                    rRect.top + rRect.height / 2
                                );
                                
                                packet.style.opacity = '1';
                                packet.style.animation = 'dataFlow 0.5s forwards';
                            }, i * 80);
                        }
                    }
                });
            }, 1800);

            setTimeout(() => {
                // 创建连接线和中和反应
                const antioxidants = document.querySelectorAll('.antioxidant');
                const radicals = document.querySelectorAll('.radical');
                const connections = [];
                
                antioxidants.forEach((antioxidant, aIndex) => {
                    if (aIndex % 2 === 0 && aIndex / 2 < radicals.length) {
                        const radical = radicals[aIndex / 2];
                        const connection = createConnection(antioxidant, radical);
                        connections.push(connection);
                        
                        setTimeout(() => {
                            connection.style.opacity = '1';
                            connection.style.animation = 'fadeIn 0.3s forwards';
                        }, aIndex * 10);
                    }
                });
                
                // 中和反应
                radicals.forEach((radical, index) => {
                    setTimeout(() => {
                        radical.style.animation = 'neutralize 0.5s forwards';
                        
                        // 同时移除对应的连接线
                        if (index < connections.length) {
                            connections[index].style.animation = 'neutralize 0.5s forwards';
                        }
                    }, index * 15);
                });
            }, 2100);

            setTimeout(() => {
                lyrics.style.opacity = '1';
                lyrics.style.animation = 'fadeIn 0.5s forwards, glitch 0.2s infinite 0.5s';
            }, 2400);
        });
    </script>
</body>
</html>